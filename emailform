import React, { useRef, useState } from 'react';
import emailjs from '@emailjs/browser';

const App = () => {
  const [IsChecked, setIsChecked] = useState(false);

  const CheckHandler = checked => {
    setIsChecked(checked);
  };

  const onSubmit = e => {
    e.preventDefault();

    if (IsChecked) {
      emailjs
        .sendForm(
          'service_5olyxwd',
          'template_jf4jqwv',
          e.target,
          'tfSDFQO6kUxgy9p1r'
        )
        .then(
          res => {
            alert('메일이 전송되었습니다.');
            console.log(res);
          },
          err => {
            alert('메일 전송에 실패하였습니다. 다시 시도해주세요.');
            console.log(err);
          }
        );
    } else {
      alert('개인정보 제공에 동의해주세요.');
    }
  };

  return (
    <div className='FadeButton'>
      <div className='MailWrap'>
        <div className='MailTitle'>상담 문의하기</div>
        <div className='MailText'>
          동물병원 운영에 대해 궁굼하신 사항이 있다면 언제든지 문의해주세요.
        </div>
        <form onSubmit={onSubmit}>
          <div className='NameInputWrap'>
            <div className='NameInputBlock'>
              <div className='hospitalName'>병원명</div>
              <input type='text' name='hospital'/>
            </div>
            <div className='NameInputBlock'>
              <div className='name'>성 함</div>
              <input type='text' name='name'/>
            </div>
          </div>
          <div className='NameInputWrap'>
            <div className='NameInputBlock'>
              <div className='phoneName'>연락처</div>
              <input type='tel' name='phone'/>
            </div>
            <div className='NameInputBlock'>
              <div className='emailName'>이메일</div>
              <input type='email' name='email'/>
            </div>
          </div>
          <div className='TextAreaBlock'>
            <div className='inquiryName'>문의 내용</div>
            <textarea type='text' name='text'/>
          </div>
          <div className='CheckBoxBlock'>
            <input
              type='checkbox'
              checked={IsChecked}
              onChange={e => CheckHandler(e.target.checked)}
            />
            <div className='CheckBoxText'>개인정보 제공동의</div>
            <div className='bubbleblock'>
              <div className='bubbletext'>
                IBS 파트너스는 고객 문의사항 접수 및 답변을 위해 아래와 같이<br/>
                개인정보를 수집,이용합니다.
              </div>
              <div className='bubbletextsmall'>
                목적: 고객 문의사항 접수 및 답변
              </div>
              <div className='bubbletextsmall'>
                항목: 병원명, 성함, 연락처, 이메일
              </div>
              <div className='bubbletextsmall'>보유 기간: 수집일로부터 1년</div>
              <div className='bubbletextsmall margin'>
                서비스 이용에 필요한 최소한의 수집 및 이용에 동의하지 않을 수<br/>
                있으나, 동의를 거부할 경우 서비스 이용에 제한이 있을 수
                있습니다.
              </div>
            </div>
          </div>
          <button type='submit'>제출하기</button>
        </form>
      </div>
    </div>
  );
};

export default App;
